<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Success Header -->
            <div class="text-center mb-4">
                <div class="mb-3">
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
                </div>
                <h1 class="display-5 fw-bold text-success">Booking Confirmed!</h1>
                <p class="lead text-muted">
                    Your taxi has been booked successfully. A driver has been assigned to your trip.
                </p>
            </div>

            <!-- Booking Details Card -->
            <div class="card shadow mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-receipt"></i> Booking Details
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="bi bi-hash"></i> Booking ID</h6>
                            <p class="font-monospace text-muted mb-3"><%= booking.id %></p>
                            
                            <h6 class="text-primary"><i class="bi bi-person"></i> Passenger</h6>
                            <p class="mb-1"><strong><%= booking.passengerName %></strong></p>
                            <p class="text-muted mb-3"><i class="bi bi-telephone"></i> <%= booking.passengerPhone %></p>
                            
                            <h6 class="text-primary"><i class="bi bi-clock"></i> Booking Time</h6>
                            <p class="text-muted mb-3"><%= booking.createdAt.toLocaleString() %></p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary"><i class="bi bi-route"></i> Trip Details</h6>
                            <div class="mb-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="bi bi-geo-alt text-primary me-2"></i>
                                    <span><strong>From:</strong> <%= booking.pickup %></span>
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <i class="bi bi-geo-alt-fill text-danger me-2"></i>
                                    <span><strong>To:</strong> <%= booking.destination %></span>
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <i class="bi bi-speedometer2 text-info me-2"></i>
                                    <span><strong>Distance:</strong> ~<%= booking.distance %> km</span>
                                </div>
                            </div>
                            
                            <h6 class="text-primary"><i class="bi bi-currency-dollar"></i> Fare</h6>
                            <h4 class="text-success mb-0">$<%= booking.fare %></h4>
                            <small class="text-muted">Estimated total fare</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Driver Details Card -->
            <div class="card shadow mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-badge"></i> Assigned Driver
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h4 class="mb-2">
                                <i class="bi bi-person-circle text-primary"></i> <%= driver.name %>
                            </h4>
                            <p class="mb-2">
                                <i class="bi bi-geo-alt text-muted"></i> 
                                <strong>Current Location:</strong> <%= driver.location %>
                            </p>
                            <p class="mb-2">
                                <i class="bi bi-star-fill text-warning"></i> 
                                <strong>Rating:</strong> <%= driver.rating %>/5.0
                            </p>
                            <span class="badge bg-success">
                                <i class="bi bi-check-circle"></i> En Route to Pickup
                            </span>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="bg-light rounded p-3">
                                <i class="bi bi-taxi-front text-primary" style="font-size: 3rem;"></i>
                                <p class="mt-2 mb-0 small text-muted">Your driver is on the way!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Timeline -->
            <div class="card shadow mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-list-task"></i> Trip Status
                    </h5>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item active">
                            <div class="timeline-marker bg-success">
                                <i class="bi bi-check"></i>
                            </div>
                            <div class="timeline-content">
                                <h6>Booking Confirmed</h6>
                                <small class="text-muted">Driver assigned successfully</small>
                            </div>
                        </div>
                        <div class="timeline-item pending">
                            <div class="timeline-marker bg-warning">
                                <i class="bi bi-clock"></i>
                            </div>
                            <div class="timeline-content">
                                <h6>Driver En Route</h6>
                                <small class="text-muted">Estimated arrival: 5-10 minutes</small>
                            </div>
                        </div>
                        <div class="timeline-item pending">
                            <div class="timeline-marker bg-secondary">
                                <i class="bi bi-geo-alt"></i>
                            </div>
                            <div class="timeline-content">
                                <h6>Pickup</h6>
                                <small class="text-muted">Driver will arrive at pickup location</small>
                            </div>
                        </div>
                        <div class="timeline-item pending">
                            <div class="timeline-marker bg-secondary">
                                <i class="bi bi-geo-alt-fill"></i>
                            </div>
                            <div class="timeline-content">
                                <h6>Trip Complete</h6>
                                <small class="text-muted">Arrival at destination</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="row g-3">
                <div class="col-md-4">
                    <a href="/" class="btn btn-outline-primary w-100">
                        <i class="bi bi-house"></i> Back to Home
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="/missions" class="btn btn-info w-100">
                        <i class="bi bi-list-task"></i> Track Mission
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="/book" class="btn btn-success w-100">
                        <i class="bi bi-plus-circle"></i> Book Another
                    </a>
                </div>
            </div>

            <!-- Important Notes -->
            <div class="alert alert-info mt-4">
                <h6><i class="bi bi-info-circle"></i> Important Notes</h6>
                <ul class="mb-0">
                    <li>Your driver will contact you when they arrive at the pickup location</li>
                    <li>Please be ready 5 minutes before the estimated arrival time</li>
                    <li>You can track your trip status in the <a href="/missions">Missions</a> section</li>
                    <li>Payment will be collected at the end of the trip</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
.timeline {
    position: relative;
    padding-left: 30px;
}

.timeline-item {
    position: relative;
    margin-bottom: 20px;
}

.timeline-item:not(:last-child)::before {
    content: '';
    position: absolute;
    left: -19px;
    top: 30px;
    width: 2px;
    height: 40px;
    background-color: #dee2e6;
}

.timeline-marker {
    position: absolute;
    left: -30px;
    top: 0;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
}

.timeline-content h6 {
    margin-bottom: 5px;
    color: #495057;
}

.timeline-item.pending .timeline-content h6 {
    color: #6c757d;
}

.timeline-item.pending .timeline-content small {
    color: #adb5bd;
}
</style>

<script>
// Auto-refresh to show mission updates
setInterval(() => {
    // In a real app, this would fetch mission status updates
    console.log('Checking for mission updates...');
}, 10000);

// Show notification
if ('Notification' in window && Notification.permission === 'granted') {
    new Notification('Booking Confirmed!', {
        body: 'Your taxi has been booked. Driver <%= driver.name %> is on the way.',
        icon: '/favicon.ico'
    });
}
</script>